!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).panzoom=e()}}(function(){return function i(a,c,u){function f(n,e){if(!c[n]){if(!a[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(s)return s(n,!0);var o=new Error("Cannot find module '"+n+"'");throw o.code="MODULE_NOT_FOUND",o}var r=c[n]={exports:{}};a[n][0].call(r.exports,function(e){return f(a[n][1][e]||e)},r,r.exports,i,a,c,u)}return c[n].exports}for(var s="function"==typeof require&&require,e=0;e<u.length;e++)f(u[e]);return f}({1:[function(e,n,t){"use strict";var pe=e("wheel"),ve=e("amator"),he=e("ngraph.events"),ye=e("./lib/kinetic.js"),o=e("./lib/createTextSelectionInterceptor.js"),ge=o(),we=o(!0),xe=e("./lib/transform.js"),be=e("./lib/svgController.js"),Ee=e("./lib/domController.js"),Ce=1,Te=1.75,Se=300;function l(e,r){var s=(r=r||{}).controller;if(s||(e instanceof SVGElement&&(s=be(e,r)),e instanceof HTMLElement&&(s=Ee(e,r))),!s)throw new Error("Cannot create panzoom for the current type of dom element");var l=s.getOwner(),c={x:0,y:0},n=!1,d=new xe;s.initTransform&&s.initTransform(d);var t,u="function"==typeof r.filterKey?r.filterKey:ke,m="number"==typeof r.pinchSpeed?r.pinchSpeed:1,i=r.bounds,a="number"==typeof r.maxZoom?r.maxZoom:Number.POSITIVE_INFINITY,f="number"==typeof r.minZoom?r.minZoom:0,p="number"==typeof r.boundsPadding?r.boundsPadding:.05,v="number"==typeof r.zoomDoubleClickSpeed?r.zoomDoubleClickSpeed:Te,h=r.beforeWheel||ke,o=r.beforeMouseDown||ke,y="number"==typeof r.zoomSpeed?r.zoomSpeed:Ce,g=Ae(r.transformOrigin),w=r.enableTextSelection?we:ge;!function(e){var n=typeof e;if("undefined"==n||"boolean"==n)return;if(!(Me(e.left)&&Me(e.top)&&Me(e.bottom)&&Me(e.right)))throw new Error("Bounds object is not valid. It can be: undefined, boolean (true|false) or an object {left, top, right, bottom}")}(i),r.autocenter&&function(){var e,n,t=0,o=0,r=N();if(r)t=r.left,o=r.top,e=r.right-r.left,n=r.bottom-r.top;else{var i=l.getBoundingClientRect();e=i.width,n=i.height}var a=s.getBBox();if(0===a.width||0===a.height)return;var c=n/a.height,u=e/a.width,f=Math.min(u,c);d.x=-(a.left+a.width/2)*f+e/2+t,d.y=-(a.top+a.height/2)*f+n/2+o,d.scale=f}();var x,b,E,C,T,S,A,k,M=0,L=!1,j=!1;T="smoothScroll"in r&&!r.smoothScroll?{start:ke,stop:ke,cancel:ke}:ye(function(){return{x:d.x,y:d.y}},function(e,n){ue(),z(e,n)},r.smoothScroll);var F=!1;R();var D={dispose:function(){V()},moveBy:_,moveTo:z,centerOn:function(e){var n=e.ownerSVGElement;if(!n)throw new Error("ui element is required to be within the scene");var t=e.getBoundingClientRect(),o=t.left+t.width/2,r=t.top+t.height/2,i=n.getBoundingClientRect(),a=i.width/2-o,c=i.height/2-r;_(a,c,!0)},zoomTo:ce,zoomAbs:Z,smoothZoom:ie,smoothZoomAbs:function(n,t,e){var o={scale:d.scale},r={scale:e};T.cancel(),ue(),A=ve(o,r,{step:function(e){Z(n,t,e.scale)}})},showRectangle:function(e){var n=l.getBoundingClientRect(),t=B(n.width,n.height),o=e.right-e.left,r=e.bottom-e.top;if(!Number.isFinite(o)||!Number.isFinite(r))throw new Error("Invalid rectangle");var i=t.x/o,a=t.y/r,c=Math.min(i,a);d.x=-(e.left+o/2)*c+t.x/2,d.y=-(e.top+r/2)*c+t.y/2,d.scale=c},pause:function(){V(),F=!0},resume:function(){F&&(R(),F=!1)},isPaused:function(){return F},getTransform:function(){return d},getMinZoom:function(){return f},setMinZoom:function(e){f=e},getMaxZoom:function(){return a},setMaxZoom:function(e){a=e},getTransformOrigin:function(){return g},setTransformOrigin:function(e){g=Ae(e)},getZoomSpeed:function(){return y},setZoomSpeed:function(e){if(!Number.isFinite(e))throw new Error("Zoom speed should be a number");y=e}};return he(D),D;function B(e,n){if(s.getScreenCTM){var t=s.getScreenCTM(),o=t.a,r=t.d,i=t.e,a=t.f;c.x=e*o-i,c.y=n*r-a}else c.x=e,c.y=n;return c}function z(e,n){d.x=e,d.y=n,q(),me("pan"),P()}function O(e,n){z(d.x+e,d.y+n)}function q(){var e=N();if(e){var n,t,o=!1,r=(n=s.getBBox(),{left:(t=function(e,n){return{x:e*d.scale+d.x,y:n*d.scale+d.y}}(n.left,n.top)).x,top:t.y,right:n.width*d.scale+t.x,bottom:n.height*d.scale+t.y}),i=e.left-r.right;return 0<i&&(d.x+=i,o=!0),(i=e.right-r.left)<0&&(d.x+=i,o=!0),0<(i=e.top-r.bottom)&&(d.y+=i,o=!0),(i=e.bottom-r.top)<0&&(d.y+=i,o=!0),o}}function N(){if(i){if("boolean"!=typeof i)return i;var e=l.getBoundingClientRect(),n=e.width,t=e.height;return{left:n*p,top:t*p,right:n*(1-p),bottom:t*(1-p)}}}function P(){n=!0,t=window.requestAnimationFrame(K)}function I(e,n,t){if(Le(e)||Le(n)||Le(t))throw new Error("zoom requires valid numbers");var o=d.scale*t;if(o<f){if(d.scale===f)return;t=f/d.scale}if(a<o){if(d.scale===a)return;t=a/d.scale}var r=B(e,n);(d.x=r.x-t*(r.x-d.x),d.y=r.y-t*(r.y-d.y),i&&1===p&&1===f)?(d.scale*=t,q()):q()||(d.scale*=t);me("zoom"),P()}function Z(e,n,t){I(e,n,t/d.scale)}function _(e,n,t){if(!t)return O(e,n);S&&S.cancel();var o=0,r=0;S=ve({x:0,y:0},{x:e,y:n},{step:function(e){O(e.x-o,e.y-r),o=e.x,r=e.y}})}function R(){l.addEventListener("mousedown",Q,{passive:!1}),l.addEventListener("dblclick",J,{passive:!1}),l.addEventListener("touchstart",Y,{passive:!1}),l.addEventListener("keydown",W,{passive:!1}),pe.addWheelListener(l,oe,{passive:!1}),P()}function V(){pe.removeWheelListener(l,oe),l.removeEventListener("mousedown",Q),l.removeEventListener("keydown",W),l.removeEventListener("dblclick",J),l.removeEventListener("touchstart",Y),t&&(window.cancelAnimationFrame(t),t=0),T.cancel(),ne(),te(),w.release(),le()}function K(){n&&(n=!1,s.applyTransform(d),me("transform"),t=0)}function W(e){var n=0,t=0,o=0;if(38===e.keyCode?t=1:40===e.keyCode?t=-1:37===e.keyCode?n=1:39===e.keyCode?n=-1:189===e.keyCode||109===e.keyCode?o=1:187!==e.keyCode&&107!==e.keyCode||(o=-1),!u(e,n,t,o)){if(n||t){onKeyDefault.is_passive||e.preventDefault(),e.defaultPrevented||(onKeyDefault.is_passive=!0),e.stopPropagation();var r=l.getBoundingClientRect();_(.05*(i=Math.min(r.width,r.height))*n,.05*i*t)}if(o){var i,a=fe(100*o);ce((i=g?ae():{x:(c=l.getBoundingClientRect()).width/2,y:c.height/2}).x,i.y,a)}var c}}function Y(e){if(!function e(n){if(r.onTouch&&!r.onTouch(n))return;n.stopPropagation();e.is_passive||n.preventDefault();n.defaultPrevented||(e.is_passive=!0)}(e),1===e.touches.length)return(n=e).touches[0],t=re(n.touches[0]),o=B((x=t).x,t.y),b=o.x,E=o.y,T.cancel(),void G();var n,t,o;2===e.touches.length&&(C=X(e.touches[0],e.touches[1]),k=!0,G())}function G(){L||(L=!0,document.addEventListener("touchmove",U),document.addEventListener("touchend",H),document.addEventListener("touchcancel",H))}function U(e){if(1===e.touches.length){e.stopPropagation();var n=B((s=re(e.touches[0])).x,s.y),t=n.x-b,o=n.y-E;0!=t&&0!=o&&se(),b=n.x,E=n.y,_(t,o)}else if(2===e.touches.length){k=!0;var r=e.touches[0],i=e.touches[1],a=X(r,i),c=1+(a/C-1)*m,u=re(r),f=re(i);if(b=(u.x+f.x)/2,E=(u.y+f.y)/2,g){var s=ae();b=s.x,E=s.y}ce(b,E,c),C=a,e.stopPropagation(),U.is_passive||e.preventDefault(),e.defaultPrevented||(U.is_passive=!0)}}function H(e){if(0<e.touches.length){var n=B((t=re(e.touches[0])).x,t.y);b=n.x,E=n.y}else{var t,o=new Date;if(o-M<Se)if(g)ie((t=ae()).x,t.y,v);else ie(x.x,x.y,v);M=o,L=!1,le(),te()}}function X(e,n){var t=e.clientX-n.clientX,o=e.clientY-n.clientY;return Math.sqrt(t*t+o*o)}function J(e){!function e(n){r.onDoubleClick&&!r.onDoubleClick(n)||(e.is_passive||n.preventDefault(),n.defaultPrevented||(e.is_passive=!0),n.stopPropagation())}(e);var n=re(e);g&&(n=ae()),ie(n.x,n.y,v)}function Q(e){if(!o(e)){if(L)return e.stopPropagation(),!1;if(1===e.button&&null!==window.event||0===e.button){T.cancel();var n=re(e),t=B(n.x,n.y);return b=t.x,E=t.y,document.addEventListener("mousemove",$),document.addEventListener("mouseup",ee),w.capture(e.target||e.srcElement),!1}}}function $(e){if(!L){se();var n=re(e),t=B(n.x,n.y),o=t.x-b,r=t.y-E;b=t.x,E=t.y,_(o,r)}}function ee(){w.release(),le(),ne()}function ne(){document.removeEventListener("mousemove",$),document.removeEventListener("mouseup",ee),j=!1}function te(){document.removeEventListener("touchmove",U),document.removeEventListener("touchend",H),document.removeEventListener("touchcancel",H),k=j=!1}function oe(e){if(!h(e)){T.cancel();var n=e.deltaY;0<e.deltaMode&&(n*=100);var t=fe(n);if(1!==t){var o=g?ae():re(e);ce(o.x,o.y,t),oe.is_passive||e.preventDefault(),e.defaultPrevented||(oe.is_passive=!0)}}}function re(e){var n=l.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}}function ie(n,t,e){var o=d.scale,r={scale:o},i={scale:e*o};T.cancel(),ue(),A=ve(r,i,{step:function(e){Z(n,t,e.scale)},done:de})}function ae(){var e=l.getBoundingClientRect();return{x:e.width*g.x,y:e.height*g.y}}function ce(e,n,t){return T.cancel(),ue(),I(e,n,t)}function ue(){A&&(A.cancel(),A=null)}function fe(e){return 1-Math.sign(e)*Math.min(.25,Math.abs(y*e/128))}function se(){j||(me("panstart"),j=!0,T.start())}function le(){j&&(k||T.stop(),me("panend"))}function de(){me("zoomend")}function me(e){D.fire(e,D)}}function Ae(e){if(e)return"object"==typeof e?(Me(e.x)&&Me(e.y)||r(e),e):void r()}function r(e){throw console.error(e),new Error(["Cannot parse transform origin.","Some good examples:",'  "center center" can be achieved with {x: 0.5, y: 0.5}','  "top center" can be achieved with {x: 0.5, y: 0}','  "bottom right" can be achieved with {x: 1, y: 1}'].join("\n"))}function ke(){}function Me(e){return Number.isFinite(e)}function Le(e){return Number.isNaN?Number.isNaN(e):e!=e}n.exports=l,function(){if("undefined"!=typeof document){var e=document.getElementsByTagName("script");if(e){for(var i,n=0;n<e.length;++n){var t=e[n];if(t.src&&t.src.match(/\bpanzoom(\.min)?\.js/)){i=t;break}}if(i){var a=i.getAttribute("query");if(a){var c=i.getAttribute("name")||"pz",u=Date.now();!function e(){var n=document.querySelector(a);if(!n){var t=Date.now(),o=t-u;return o<2e3?void setTimeout(e,100):void console.error("Cannot find the panzoom element",c)}var r=f(i);console.log(r);window[c]=l(n,r)}()}}}}function f(e){for(var n=e.attributes,t={},o=0;o<n.length;++o){var r=s(n[o]);r&&(t[r.name]=r.value)}return t}function s(e){if(e.name&&("p"===e.name[0]&&"z"===e.name[1]&&"-"===e.name[2]))return{name:e.name.substr(3),value:JSON.parse(e.value)}}}()},{"./lib/createTextSelectionInterceptor.js":2,"./lib/domController.js":3,"./lib/kinetic.js":4,"./lib/svgController.js":5,"./lib/transform.js":6,amator:7,"ngraph.events":9,wheel:10}],2:[function(e,n,t){function i(e){return e.stopPropagation(),!1}function a(){}n.exports=function(e){if(e)return{capture:a,release:a};var n,t,o,r=!1;return{capture:function(e){r=!0,t=window.document.onselectstart,o=window.document.ondragstart,window.document.onselectstart=i,(n=e).ondragstart=i},release:function(){if(!r)return;r=!1,window.document.onselectstart=t,n&&(n.ondragstart=o)}}}},{}],3:[function(e,n,t){n.exports=function(n,e){if(!(n instanceof HTMLElement))throw new Error("svg element is required for svg.panzoom to work");var t=n.parentElement;if(!t)throw new Error("Do not apply panzoom to the detached DOM element. ");n.scrollTop=0,e.disableKeyboardInteraction||t.setAttribute("tabindex",0);return{getBBox:function(){return{left:0,top:0,width:n.clientWidth,height:n.clientHeight}},getOwner:function(){return t},applyTransform:function(e){n.style.transformOrigin="0 0 0",n.style.transform="matrix("+e.scale+", 0, 0, "+e.scale+", "+e.x+", "+e.y+")"}}}},{}],4:[function(e,n,t){(function(x){n.exports=function(a,r,e){"object"!=typeof e&&(e={});var c,u,f,s,i,l,d,m,p,v,n="number"==typeof e.minVelocity?e.minVelocity:5,t="number"==typeof e.amplitude?e.amplitude:.25,o="function"==typeof e.cancelAnimationFrame?e.cancelAnimationFrame:"function"==typeof x.cancelAnimationFrame?x.cancelAnimationFrame:clearTimeout,h="function"==typeof e.requestAnimationFrame?e.requestAnimationFrame:"function"==typeof x.requestAnimationFrame?x.requestAnimationFrame:function(e){return setTimeout(e,16)},y=342;return{start:function(){c=a(),l=p=s=d=0,u=new Date,o(f),o(v),f=h(g)},stop:function(){o(f),o(v);var e=a();i=e.x,m=e.y,u=Date.now(),(s<-n||n<s)&&(i+=l=t*s);(d<-n||n<d)&&(m+=p=t*d);v=h(w)},cancel:function(){o(f),o(v)}};function g(){var e=Date.now(),n=e-u;u=e;var t=a(),o=t.x-c.x,r=t.y-c.y;c=t;var i=1e3/(1+n);s=.8*o*i+.2*s,d=.8*r*i+.2*d,f=h(g)}function w(){var e=Date.now()-u,n=!1,t=0,o=0;l&&(.5<(t=-l*Math.exp(-e/y))||t<-.5?n=!0:t=l=0),p&&(.5<(o=-p*Math.exp(-e/y))||o<-.5?n=!0:o=p=0),n&&(r(i+t,m+o),v=h(w))}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(e,n,t){n.exports=function(t,e){if(!(t instanceof SVGElement))throw new Error("svg element is required for svg.panzoom to work");var o=t.ownerSVGElement;if(!o)throw new Error("Do not apply panzoom to the root <svg> element. Use its child instead (e.g. <g></g>). As of March 2016 only FireFox supported transform on the root element");e.disableKeyboardInteraction||o.setAttribute("tabindex",0);return{getBBox:function(){var e=t.getBBox();return{left:e.x,top:e.y,width:e.width,height:e.height}},getScreenCTM:function(){var e=o.getCTM();return e||o.getScreenCTM()},getOwner:function(){return o},applyTransform:function(e){t.setAttribute("transform","matrix("+e.scale+" 0 0 "+e.scale+" "+e.x+" "+e.y+")")},initTransform:function(e){var n=t.getCTM();e.x=n.e,e.y=n.f,e.scale=n.a,o.removeAttributeNS(null,"viewBox")}}}},{}],6:[function(e,n,t){n.exports=function(){this.x=0,this.y=0,this.scale=1}},{}],7:[function(e,n,t){var o=e("bezier-easing"),p={ease:o(.25,.1,.25,1),easeIn:o(.42,0,1,1),easeOut:o(0,0,.58,1),easeInOut:o(.42,0,.58,1),linear:o(0,0,1,1)};function v(){}function r(){var n=new Set,t=new Set,o=0;return{next:e,cancel:e,clearAll:function(){n.clear(),t.clear(),cancelAnimationFrame(o),o=0}};function e(e){t.add(e),o=o||requestAnimationFrame(r)}function r(){o=0;var e=t;t=n,(n=e).forEach(function(e){e()}),n.clear()}}n.exports=function(o,n,e){var r=Object.create(null),i=Object.create(null),a="function"==typeof(e=e||{}).easing?e.easing:p[e.easing];a||(e.easing&&console.warn("Unknown easing function in amator: "+e.easing),a=p.ease);var c="function"==typeof e.step?e.step:v,u="function"==typeof e.done?e.done:v,f=function(e){if(!e){return"undefined"!=typeof window&&window.requestAnimationFrame?{next:window.requestAnimationFrame.bind(window),cancel:window.cancelAnimationFrame.bind(window)}:{next:function(e){return setTimeout(e,1e3/60)},cancel:function(e){return clearTimeout(e)}}}if("function"!=typeof e.next)throw new Error("Scheduler is supposed to have next(cb) function");if("function"!=typeof e.cancel)throw new Error("Scheduler is supposed to have cancel(handle) function");return e}(e.scheduler),s=Object.keys(n);s.forEach(function(e){r[e]=o[e],i[e]=n[e]-o[e]});var l,t="number"==typeof e.duration?e.duration:400,d=Math.max(1,.06*t),m=0;return l=f.next(function e(){var n=a(m/d);m+=1;t=n,s.forEach(function(e){o[e]=i[e]*t+r[e]});var t;m<=d?(l=f.next(e),c(o)):(l=0,setTimeout(function(){u(o)},0))}),{cancel:function(){f.cancel(l),l=0}}},n.exports.makeAggregateRaf=r,n.exports.sharedScheduler=r()},{"bezier-easing":8}],8:[function(e,n,t){var u=4,f=1e-7,s=10,r="function"==typeof Float32Array;function o(e,n){return 1-3*n+3*e}function i(e,n){return 3*n-6*e}function a(e){return 3*e}function l(e,n,t){return((o(n,t)*e+i(n,t))*e+a(n))*e}function d(e,n,t){return 3*o(n,t)*e*e+2*i(n,t)*e+a(n)}function m(e){return e}n.exports=function(i,n,a,t){if(!(0<=i&&i<=1&&0<=a&&a<=1))throw new Error("bezier x values must be in [0, 1] range");if(i===n&&a===t)return m;for(var c=new(r?Float32Array:Array)(11),e=0;e<11;++e)c[e]=l(.1*e,i,a);function o(e){for(var n=0,t=1;10!==t&&c[t]<=e;++t)n+=.1;var o=n+.1*((e-c[--t])/(c[t+1]-c[t])),r=d(o,i,a);return.001<=r?function(e,n,t,o){for(var r=0;r<u;++r){var i=d(n,t,o);if(0===i)return n;n-=(l(n,t,o)-e)/i}return n}(e,o,i,a):0===r?o:function(e,n,t,o,r){for(var i,a,c=0;0<(i=l(a=n+(t-n)/2,o,r)-e)?t=a:n=a,Math.abs(i)>f&&++c<s;);return a}(e,n,n+.1,i,a)}return function(e){return 0===e?0:1===e?1:l(o(e),n,t)}}},{}],9:[function(e,n,t){n.exports=function(e){!function(e){if(!e)throw new Error("Eventify cannot use falsy object as events subject");for(var n=["on","fire","off"],t=0;t<n.length;++t)if(e.hasOwnProperty(n[t]))throw new Error("Subject cannot be eventified, since it already has property '"+n[t]+"'")}(e);var i,a,n=(i=e,a=Object.create(null),{on:function(e,n,t){if("function"!=typeof n)throw new Error("callback is expected to be a function");var o=a[e];return(o=o||(a[e]=[])).push({callback:n,ctx:t}),i},off:function(e,n){if(void 0===e)return a=Object.create(null),i;if(a[e])if("function"!=typeof n)delete a[e];else for(var t=a[e],o=0;o<t.length;++o)t[o].callback===n&&t.splice(o,1);return i},fire:function(e){var n,t=a[e];if(!t)return i;1<arguments.length&&(n=Array.prototype.splice.call(arguments,1));for(var o=0;o<t.length;++o){var r=t[o];r.callback.apply(r.ctx,n)}return i}});return e.on=n.on,e.off=n.off,e.fire=n.fire,e}},{}],10:[function(e,n,t){function o(e,n,t){e.addEventListener("wheel",n,t)}n.exports=o,n.exports.addWheelListener=o,n.exports.removeWheelListener=function(e,n,t){e.removeEventListener("wheel",n,t)}},{}]},{},[1])(1)});